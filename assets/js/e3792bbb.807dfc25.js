"use strict";(self.webpackChunk_eightshift_docs=self.webpackChunk_eightshift_docs||[]).push([[71336],{62895:(e,s,n)=>{n.r(s),n.d(s,{assets:()=>c,contentTitle:()=>r,default:()=>h,frontMatter:()=>t,metadata:()=>l,toc:()=>a});var i=n(74848),o=n(28453);const t={id:"7-8",title:"Version 7 to 8"},r=void 0,l={id:"migrations/7-8",title:"Version 7 to 8",description:"This migration guide contains migration instructions for:",source:"@site/docs/migrations/7-8.md",sourceDirName:"migrations",slug:"/migrations/7-8",permalink:"/docs/migrations/7-8",draft:!1,unlisted:!1,tags:[],version:"current",frontMatter:{id:"7-8",title:"Version 7 to 8"},sidebar:"docs",previous:{title:"Version 8 to 9",permalink:"/docs/migrations/8-9"},next:{title:"Version 6 to 7",permalink:"/docs/migrations/6-7"}},c={},a=[{value:"Required changes",id:"required-changes",level:2},{value:"Swiper changes:",id:"swiper-changes",level:3},{value:"Storybook changes:",id:"storybook-changes",level:3}];function d(e){const s={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",ul:"ul",...(0,o.R)(),...e.components};return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(s.p,{children:"This migration guide contains migration instructions for:"}),"\n",(0,i.jsxs)(s.ul,{children:["\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/infinum/eightshift-boilerplate/releases/tag/8.0.0",children:"eightshift/boilerplate"})," - ",(0,i.jsx)(s.strong,{children:"7+ --\x3e 8.0.0"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/infinum/eightshift-frontend-libs/releases/tag/7.0.0",children:"eightshift/frontend-libs"})," - ",(0,i.jsx)(s.strong,{children:"6+ --\x3e 7.0.0"})]}),"\n",(0,i.jsxs)(s.li,{children:[(0,i.jsx)(s.a,{href:"https://github.com/infinum/eightshift-libs/releases/tag/6.0.0",children:"eightshift/libs"})," - ",(0,i.jsx)(s.strong,{children:"5+ --\x3e 6.0.0"})]}),"\n"]}),"\n",(0,i.jsx)(s.h2,{id:"required-changes",children:"Required changes"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Migration time: ~10min."})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Update ",(0,i.jsx)(s.code,{children:"composer.json"})," to ",(0,i.jsx)(s.code,{children:'"infinum/eightshift-libs": "^6.0"'}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Update ",(0,i.jsx)(s.code,{children:"package.json"})," to the latest versions:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-json",children:'"@eightshift/frontend-libs": "^7.0.0",\n"husky": "^8.0.1",\n"webpack": "^5.73.0",\n"webpack-cli": "^4.10.0"\n'})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Check ",(0,i.jsx)(s.code,{children:"package.json"})," for additional packages that might need updating, such as coding standards."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Add ",(0,i.jsx)(s.code,{children:".browserslistrc"})," to the root of your theme/plugin and copy the details from ",(0,i.jsx)(s.a,{href:"https://github.com/infinum/eightshift-boilerplate/blob/develop/.browserslistrc",children:"here"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["We have removed the ",(0,i.jsx)(s.code,{children:"normalize"})," package from the project as it was unmaintained. Search your project and replace:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-scss",children:"@import 'normalize-scss';\n@include normalize();\n"})}),"\n",(0,i.jsx)(s.p,{children:"with this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-scss",children:"@import '@eightshift/frontend-libs/styles/scss/normalize';\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["We've removed ",(0,i.jsx)(s.code,{children:"@babel/polyfill"})," package, so please remove ",(0,i.jsx)(s.code,{children:"require('@babel/polyfill');"})," from your project or install it manually if you need to support older browsers."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsx)(s.p,{children:"If your Webpack build outputs warnings such as:"}),"\n",(0,i.jsxs)(s.blockquote,{children:["\n",(0,i.jsx)(s.p,{children:"Should not import the named export 'componentJsClass' (imported as 'componentJsClass') from default-exporting module (only default export is available soon)."}),"\n"]}),"\n",(0,i.jsx)(s.p,{children:"check the JS files used on the frontend and replace:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"import { componentJsClass } from './../manifest.json';\n"})}),"\n",(0,i.jsx)(s.p,{children:"with this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"import manifest from './../manifest.json';\n\nconst {\n\tcomponentJsClass,\n} = manifest;\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["If you were using ",(0,i.jsx)(s.code,{children:"getAllBlocksList"})," function as a callback for ",(0,i.jsx)(s.code,{children:"allowed_block_types_all"})," filter, there is no need for change. However, if you used a custom implementation function, consider using the ",(0,i.jsx)(s.code,{children:"getAllAllowedBlocksList"})," in your callback since it provides more options and gives more control over blocks that are being used in the project."]}),"\n"]}),"\n"]}),"\n",(0,i.jsx)(s.h3,{id:"swiper-changes",children:"Swiper changes:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Migration time: ~5min."})}),"\n",(0,i.jsx)(s.p,{children:"Swiper is not a dependency of Eightshift Boilerplate, but if you are using Swiper in your project and have something like this:"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-scss",children:"@import '~swiper/swiper.scss';\n@import '~swiper/modules/pagination/pagination.scss';\n"})}),"\n",(0,i.jsxs)(s.p,{children:["please check Swiper's ",(0,i.jsx)(s.code,{children:"package.json"})," in ",(0,i.jsx)(s.code,{children:"node_modules/swiper/package.json"})," and find the ",(0,i.jsx)(s.code,{children:"exports"})," key, find the styles you are using and replace the path for the correct export path. Please note that this export can change depending on the Swiper version you are using."]}),"\n",(0,i.jsxs)(s.p,{children:["For example, for Swiper ",(0,i.jsx)(s.code,{children:"8.x.x"}),", you should replace"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-scss",children:"@import '~swiper/swiper.scss';\n@import '~swiper/modules/pagination/pagination.scss';\n"})}),"\n",(0,i.jsx)(s.p,{children:"with"}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-scss",children:"@import '~swiper/css';\n@import '~swiper/css/pagination';\n"})}),"\n",(0,i.jsx)(s.h3,{id:"storybook-changes",children:"Storybook changes:"}),"\n",(0,i.jsx)(s.p,{children:(0,i.jsx)(s.strong,{children:"Migration time: ~10min."})}),"\n",(0,i.jsxs)(s.ol,{children:["\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Check if the project is using the Storybook package ",(0,i.jsx)(s.code,{children:"@eightshift/storybook"})," because we changed the release numbers. Check the ",(0,i.jsx)(s.a,{href:"https://github.com/infinum/eightshift-storybook/releases",children:"eightshift-storybook repository's releases page"})," for reference. At the time of writing this, the current version is ",(0,i.jsx)(s.code,{children:"1.4.1"}),"."]}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Open ",(0,i.jsx)(s.code,{children:".storybook/main.js"}),". It should look like this:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"module.exports = {\n\tstories: ['./../src/Blocks/**/story.js'],\n\taddons: [\n\t\t'@storybook/addon-essentials',\n\t\t'@storybook/addon-a11y'\n\t],\n\tcore: {\n\t\tbuilder: 'webpack5',\n\t},\n\tfeatures: {\n\t\temotionAlias: false,\n\t}\n};\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Open ",(0,i.jsx)(s.code,{children:".storybook/preview-body.html"}),". It should look like this:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-html",children:"<style>\n\tbody {\n\t\tpadding: 0.75em;\n\t\topacity: 1;\n\t}\n</style>\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Open ",(0,i.jsx)(s.code,{children:".storybook/preview-head.html"}),". It should look like this:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-html",children:"<script>\n\twindow.wp = {};\n\tesRedesignBlocksLocalization = {}\n<\/script>\n"})}),"\n"]}),"\n",(0,i.jsxs)(s.li,{children:["\n",(0,i.jsxs)(s.p,{children:["Open ",(0,i.jsx)(s.code,{children:".storybook/preview.js"}),". It should look like this:"]}),"\n",(0,i.jsx)(s.pre,{children:(0,i.jsx)(s.code,{className:"language-js",children:"import { dispatch } from '@wordpress/data';\nimport { STORE_NAME } from '@eightshift/frontend-libs/scripts/editor/store';\nimport { storybookWindowObjects, storybookDefaultMocksCategories, storybookDefaultMocksColorPalette, storybookWpStyles } from '@eightshift/frontend-libs/scripts/storybook';\nimport globalSettings from '../src/Blocks/manifest.json';\n\n// Storybook order is really important because it won't work in any configuration. Be careful when changing stuff here.\n\n// Set default window objects.\nstorybookWindowObjects();\n\n// Set default categories.\nstorybookDefaultMocksCategories();\n\n// Set default color palette.\nstorybookDefaultMocksColorPalette(globalSettings);\n\n// WP styles.\nstorybookWpStyles();\n\n// Project styles.\nrequire('./../assets/styles/application.scss');\n\n// Project Blocks Frontend Part.\nrequire('./../src/Blocks/assets/styles/application-blocks.scss');\nrequire('./../src/Blocks/assets/styles/application-blocks-editor.scss');\n\n// Project Blocks Editor Part.\nrequire('../src/Blocks/assets/scripts/application-blocks-editor');\n\n// Prevent one inline style tag.\ndispatch(STORE_NAME).setConfigOutputCssGlobally(false);\n"})}),"\n"]}),"\n"]})]})}function h(e={}){const{wrapper:s}={...(0,o.R)(),...e.components};return s?(0,i.jsx)(s,{...e,children:(0,i.jsx)(d,{...e})}):d(e)}},28453:(e,s,n)=>{n.d(s,{R:()=>r,x:()=>l});var i=n(96540);const o={},t=i.createContext(o);function r(e){const s=i.useContext(t);return i.useMemo((function(){return"function"==typeof e?e(s):{...s,...e}}),[s,e])}function l(e){let s;return s=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:r(e.components),i.createElement(t.Provider,{value:s},e.children)}}}]);