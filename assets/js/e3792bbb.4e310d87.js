"use strict";(self.webpackChunk_eightshift_docs=self.webpackChunk_eightshift_docs||[]).push([[7375],{44911:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return k},frontMatter:function(){return s},metadata:function(){return p},toc:function(){return m}});var r=n(87462),o=n(63366),a=(n(67294),n(3905)),i=["components"],s={id:"7-8",title:"Version 7 to 8"},l=void 0,p={unversionedId:"migrations/7-8",id:"migrations/7-8",title:"Version 7 to 8",description:"This migration guide contains migration instructions for:",source:"@site/docs/migrations/7-8.md",sourceDirName:"migrations",slug:"/migrations/7-8",permalink:"/docs/migrations/7-8",draft:!1,tags:[],version:"current",frontMatter:{id:"7-8",title:"Version 7 to 8"},sidebar:"docs",previous:{title:"Version 8 to 9",permalink:"/docs/migrations/8-9"},next:{title:"Version 6 to 7",permalink:"/docs/migrations/6-7"}},c={},m=[{value:"Required changes:",id:"required-changes",level:3},{value:"Swiper changes:",id:"swiper-changes",level:3},{value:"Storybook changes:",id:"storybook-changes",level:3}],u={toc:m};function k(e){var t=e.components,n=(0,o.Z)(e,i);return(0,a.kt)("wrapper",(0,r.Z)({},u,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("p",null,"This migration guide contains migration instructions for:"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/infinum/eightshift-boilerplate/releases/tag/8.0.0"},"eightshift/boilerplate")," - ",(0,a.kt)("strong",{parentName:"li"},"7+ --\x3e 8.0.0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/infinum/eightshift-frontend-libs/releases/tag/7.0.0"},"eightshift/frontend-libs")," - ",(0,a.kt)("strong",{parentName:"li"},"6+ --\x3e 7.0.0")),(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://github.com/infinum/eightshift-libs/releases/tag/6.0.0"},"eightshift/libs")," - ",(0,a.kt)("strong",{parentName:"li"},"5+ --\x3e 6.0.0"))),(0,a.kt)("h3",{id:"required-changes"},"Required changes:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Migration time: ~10min.")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Update ",(0,a.kt)("inlineCode",{parentName:"p"},"composer.json")," to ",(0,a.kt)("inlineCode",{parentName:"p"},'"infinum/eightshift-libs": "^6.0"'),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Update ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," to the latest versions:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-json"},'"@eightshift/frontend-libs": "^7.0.0",\n"husky": "^8.0.1",\n"webpack": "^5.73.0",\n"webpack-cli": "^4.10.0"\n'))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Check ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," for additional packages that might need updating, such as coding standards.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Add ",(0,a.kt)("inlineCode",{parentName:"p"},".browserslistrc")," to the root of your theme/plugin and copy the details from ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/infinum/eightshift-boilerplate/blob/develop/.browserslistrc"},"here"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"We have removed the ",(0,a.kt)("inlineCode",{parentName:"p"},"normalize")," package from the project as it was unmaintained. Search your project and replace:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"@import 'normalize-scss';\n@include normalize();\n")),(0,a.kt)("p",{parentName:"li"},"with this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"@import '@eightshift/frontend-libs/styles/scss/normalize';\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"We've removed ",(0,a.kt)("inlineCode",{parentName:"p"},"@babel/polyfill")," package, so please remove ",(0,a.kt)("inlineCode",{parentName:"p"},"require('@babel/polyfill');")," from your project or install it manually if you need to support older browsers.")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If your Webpack build outputs warnings such as:"),(0,a.kt)("blockquote",{parentName:"li"},(0,a.kt)("p",{parentName:"blockquote"},"Should not import the named export 'componentJsClass' (imported as 'componentJsClass') from default-exporting module (only default export is available soon).")),(0,a.kt)("p",{parentName:"li"},"check the JS files used on the frontend and replace:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import { componentJsClass } from './../manifest.json';\n")),(0,a.kt)("p",{parentName:"li"},"with this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import manifest from './../manifest.json';\n\nconst {\n    componentJsClass,\n} = manifest;\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"If you were using ",(0,a.kt)("inlineCode",{parentName:"p"},"getAllBlocksList")," function as a callback for ",(0,a.kt)("inlineCode",{parentName:"p"},"allowed_block_types_all")," filter, there is no need for change. However, if you used a custom implementation function, consider using the ",(0,a.kt)("inlineCode",{parentName:"p"},"getAllAllowedBlocksList")," in your callback since it provides more options and gives more control over blocks that are being used in the project."))),(0,a.kt)("h3",{id:"swiper-changes"},"Swiper changes:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Migration time: ~5min.")),(0,a.kt)("p",null,"Swiper is not a dependency of Eightshift Boilerplate, but if you are using Swiper in your project and have something like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"@import '~swiper/swiper.scss';\n@import '~swiper/modules/pagination/pagination.scss';\n")),(0,a.kt)("p",null,"please check Swiper's ",(0,a.kt)("inlineCode",{parentName:"p"},"package.json")," in ",(0,a.kt)("inlineCode",{parentName:"p"},"node_modules/swiper/package.json")," and find the ",(0,a.kt)("inlineCode",{parentName:"p"},"exports")," key, find the styles you are using and replace the path for the correct export path. Please note that this export can change depending on the Swiper version you are using."),(0,a.kt)("p",null,"For example, for Swiper ",(0,a.kt)("inlineCode",{parentName:"p"},"8.x.x"),", you should replace"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"@import '~swiper/swiper.scss';\n@import '~swiper/modules/pagination/pagination.scss';\n")),(0,a.kt)("p",null,"with"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-scss"},"@import '~swiper/css';\n@import '~swiper/css/pagination';\n")),(0,a.kt)("h3",{id:"storybook-changes"},"Storybook changes:"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Migration time: ~10min.")),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Check if the project is using the Storybook package ",(0,a.kt)("inlineCode",{parentName:"p"},"@eightshift/storybook")," because we changed the release numbers. Check the ",(0,a.kt)("a",{parentName:"p",href:"https://github.com/infinum/eightshift-storybook/releases"},"eightshift-storybook repository's releases page")," for reference. At the time of writing this, the current version is ",(0,a.kt)("inlineCode",{parentName:"p"},"1.4.1"),".")),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("inlineCode",{parentName:"p"},".storybook/main.js"),". It should look like this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"module.exports = {\n    stories: ['./../src/Blocks/**/story.js'],\n    addons: [\n        '@storybook/addon-essentials',\n        '@storybook/addon-a11y'\n    ],\n    core: {\n        builder: 'webpack5',\n    },\n    features: {\n        emotionAlias: false,\n    }\n};\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("inlineCode",{parentName:"p"},".storybook/preview-body.html"),". It should look like this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<style>\n    body {\n        padding: 0.75em;\n        opacity: 1;\n    }\n</style>\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("inlineCode",{parentName:"p"},".storybook/preview-head.html"),". It should look like this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-html"},"<script>\n    window.wp = {};\n    esRedesignBlocksLocalization = {}\n<\/script>\n"))),(0,a.kt)("li",{parentName:"ol"},(0,a.kt)("p",{parentName:"li"},"Open ",(0,a.kt)("inlineCode",{parentName:"p"},".storybook/preview.js"),". It should look like this:"),(0,a.kt)("pre",{parentName:"li"},(0,a.kt)("code",{parentName:"pre",className:"language-js"},"import { dispatch } from '@wordpress/data';\nimport { STORE_NAME } from '@eightshift/frontend-libs/scripts/editor/store';\nimport { storybookWindowObjects, storybookDefaultMocksCategories, storybookDefaultMocksColorPalette, storybookWpStyles } from '@eightshift/frontend-libs/scripts/storybook';\nimport globalSettings from '../src/Blocks/manifest.json';\n\n// Storybook order is really important because it won't work in any configuration. Be careful when changing stuff here.\n\n// Set default window objects.\nstorybookWindowObjects();\n\n// Set default categories.\nstorybookDefaultMocksCategories();\n\n// Set default color palette.\nstorybookDefaultMocksColorPalette(globalSettings);\n\n// WP styles.\nstorybookWpStyles();\n\n// Project styles.\nrequire('./../assets/styles/application.scss');\n\n// Project Blocks Frontend Part.\nrequire('./../src/Blocks/assets/styles/application-blocks.scss');\nrequire('./../src/Blocks/assets/styles/application-blocks-editor.scss');\n\n// Project Blocks Editor Part.\nrequire('../src/Blocks/assets/scripts/application-blocks-editor');\n\n// Prevent one inline style tag.\ndispatch(STORE_NAME).setConfigOutputCssGlobally(false);\n")))))}k.isMDXComponent=!0},3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return k}});var r=n(67294);function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){o(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var l=r.createContext({}),p=function(e){var t=r.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=p(e.components);return r.createElement(l.Provider,{value:t},e.children)},m={inlineCode:"code",wrapper:function(e){var t=e.children;return r.createElement(r.Fragment,{},t)}},u=r.forwardRef((function(e,t){var n=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),u=p(n),k=o,d=u["".concat(l,".").concat(k)]||u[k]||m[k]||a;return n?r.createElement(d,i(i({ref:t},c),{},{components:n})):r.createElement(d,i({ref:t},c))}));function k(e,t){var n=arguments,o=t&&t.mdxType;if("string"==typeof e||o){var a=n.length,i=new Array(a);i[0]=u;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:o,i[1]=s;for(var p=2;p<a;p++)i[p]=n[p];return r.createElement.apply(null,i)}return r.createElement.apply(null,n)}u.displayName="MDXCreateElement"}}]);